# Logstash configuration with both supported and unsupported plugins
# This should generate a partial Vector config with TODO markers for unsupported parts

input {
  # Supported - should migrate cleanly
  file {
    path => "/var/log/app.log"
    start_position => "beginning"
  }

  # Unsupported - should generate TODO marker
  kafka {
    bootstrap_servers => "localhost:9092"
    topics => ["events"]
  }
}

filter {
  # Supported - should migrate cleanly
  grok {
    match => { "message" => "%{COMBINEDAPACHELOG}" }
  }

  # Unsupported - should generate TODO marker
  ruby {
    code => "event.set('timestamp_ms', (Time.now.to_f * 1000).to_i)"
  }

  # Supported - should migrate cleanly
  mutate {
    add_field => { "environment" => "production" }
  }
}

output {
  # Supported - should migrate cleanly
  elasticsearch {
    hosts => ["http://localhost:9200"]
    index => "app-logs-%{+YYYY.MM.dd}"
  }
}
